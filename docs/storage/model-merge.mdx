---
id: model-merge
title: Model Merge
sidebar_label: 7. Model Merge
---

import useBaseUrl from '@docusaurus/useBaseUrl'; // Add to the top of the file below the front matter.
import Link from '@docusaurus/Link';
import Zoom from "react-medium-image-zoom";

You can merge your models with models created by your team members into one main model.

This facilitates ease of maintenance as large models can be broken down and managed independently. A large model with several entities is easily categorized and maintained as sub-models and consolidated in the main model.

:::note
This feature is only available in Enterprise plan.
<div class="center">
    <Zoom>
        <img src={useBaseUrl("doc-images/storage/modelmerge-upgrade.png")} />
    </Zoom>
    <p>Upgrade to enterprise plan to unlock the feature</p>
</div>
:::

## Configure Model Merge

Let's take a firm that has its business operation across different regions and the Board of Directors wants to review the final profit and loss statement.
Repeating the profile and loss statement of each region leads to a model with several thousands of nodes.

It would be easier for the Region/Branch managers to create and update the profit and loss statement for their respective regions and then have it consolidated for the Board of Directors meeting.

Below is the Model merge workflow that helps us achieve such a consolidated report.
 <div >
  <Zoom>
    <img alt="Model Merge workflow" src={useBaseUrl("/doc-images/storage/features/model-merge-workflow.png")} />
  </Zoom>
  <div class="center"><p>Model Merge workflow</p></div>
 </div>

In our ValQ visual, we create a consolidated model that links to regional sub-models - *Argentina, Brazil*, and *Chile*.

The consolidated report reflects the simulations that are done in the individual regional reports.
Now there are 2 ways you can link to different models:

1. [Linking a node to an entire model](#case-1-linking-nodes-to-an-entire-model).
2. [Linking a node to a single business key node](#case-2-linking-node-to-a-single-node-from-a-model) from another model.

### Individual P&L models

Following are the screenshots of the individual models:

a. Model *Argentina* with 6 nodes.
 <div class="center">
  <Zoom>
    <img alt="Argentina model" src={useBaseUrl("/doc-images/storage/features/argentina.png")} />
  </Zoom>
  <p id="caption-left">Model Argentina <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

b. Model *Brazil* with 6 nodes.

 <div class="center">
  <Zoom>
    <img alt="Model Brazil" src={useBaseUrl("/doc-images/storage/features/brazil.png")} />
  </Zoom>
  <p id="caption-left">Model Brazil <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

c. Model *Chile* with 6 nodes.

 <div class="center">
  <Zoom>
    <img alt="Model Chile" src={useBaseUrl("/doc-images/storage/features/chile.png")} />
  </Zoom>
  <p id="caption-left">Model Chile <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

### Create the main model

- Go to **Model > New > Create an Advanced Model** in the ValQ visual.
- In the **Model > Node** navigation panel, click on the plus `+` icon next to the parent node *Total*. This adds a *Child Node*. Similarly, add 3 *Child Nodes*.
- Click on the Edit (<img width="15" src={useBaseUrl('static/img/edit.png')} />) icon next to each node.

 <div class="center">
  <Zoom>
    <img alt="Edit and configure node" src={useBaseUrl("/doc-images/storage/features/edit-configure-node.png")} />
  </Zoom>
  <p id="caption-left">Configure child node to track separate sub-models <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

 - In the **Node Configuration** pop up window, rename the Node's **Title**.

 <div class="center">
  <Zoom>
    <img alt="Rename the node" src={useBaseUrl("/doc-images/storage/features/rename-node-argentina.png")} />
  </Zoom>
  <p id="caption-left">Renaming the Node Title to Argentina <i id="credit">Credits to our partner, BlueShift Brazil</i></p>   
 </div>

- Next, select the *Configuration* option:
  - Select the **Node Type** as *Link to workspace model.*
  - **Select a workspace model** as *Model Merge(Argentina)*.

### Case 1: Linking nodes to an entire model

- Under the label **Linking To**, select **Entire workspace model**.

 <div class="center">
  <Zoom>
    <img alt="Link to workspace model" src={useBaseUrl("/doc-images/storage/features/link-node-to-argentina-model.png")} />
  </Zoom>
  <p id="caption-left">Configure the node to link to another workspace model <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

Similarly, edit and connect the other 2 *Child Nodes* to *Brazil* and *Chile* models respectively.

The below screenshot shows the 3 *Child Nodes* linked to the respective models with the total count of nodes in each model.

 <div class="center">
  <Zoom>
    <img alt="Main model's nodes connected to other models" src={useBaseUrl("/doc-images/storage/features/consolidated-child-nodes-linked.png")} />
  </Zoom>
  <p id="caption-left">Main model's nodes connected to other models <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

:::note
Linked nodes are indicated by a special linked icon both in the **Model > Node** navigation panel on the left and in the ValQ visual pane on the right.
:::

### Case 2: Linking node to a single node from a model

Let's create a 4th child node and link the node to a single node from the *Argentina* model.
Next add a 4th *Child node* under the *Total* node in the *Navigation Panel* on the left.

- In the **Edit Node** pop-up window, select **Node Type** as **Link to workspace model**.
- In the **Select a workspace model** label, choose **Sub Model - Argentina**.
- In the **Linking To** label, select the option **Node in the model**.

 <div class="center">
  <Zoom>
    <img alt="Node linked to another node from a model" src={useBaseUrl("/doc-images/storage/features/link-to-a-node.png")} />
  </Zoom>
  <p id="caption-left">Node linked to another node from a model <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

- In the **Select a node to link** label, choose **Porco** from the drop-down list of nodes (This is the node from the *Argentina* model).

## Series Mapping

In the **Map data series** section, you can map the series of the main model with the linked sub-models. 

Mapping the series is helpful in tracking linked series changes from the present model and is mapped in 2 ways: 

1. In the **Edit Node** pop window under the **Map data series** section

 <div class="center">
  <Zoom>
    <img alt="Map series" src={useBaseUrl("/doc-images/storage/features/map-series-edit-node.png")} />
  </Zoom>
  <p id="caption-left">Map model series with the linking models <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

2. Go to **Model > Data Series > Linked Model Mapping**

Click on the *Map Series* tab. Map the series of the *Consolidated* model with the respective linked model series.

 <div class="center">
  <Zoom>
    <img alt="Map seres" src={useBaseUrl("/doc-images/storage/features/map-series.png")} />
  </Zoom>
  <p id="caption-left">Map series with the respective model series <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

## Scenarios Mapping

Click the *Map Scenarios* tab in the *main/consolidated* model to map the shared Scenarios from the sub-models.

 <div class="center">
  <Zoom>
    <img alt="Map scenarios" src={useBaseUrl("/doc-images/storage/features/model-merge-mapping_scenarios.png")} />
  </Zoom>
  <p id="caption-left">Map the Scenarios <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

## Using the Model merge report

- **Tree view/Table view**

Here is the *Consolidated* model with the first 3 child nodes linked to entire models from other reports, and the 4th node that is linked to a single node from the *Argentina* model.
 <div class="center">
  <Zoom>
    <img alt="Consolidated model with nodes connected to other models*" src={useBaseUrl("/doc-images/storage/features/consolidated-nodes.png")} />
  </Zoom>
  <p id="caption-left">Consolidated model with nodes connected to other models <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

### Final result in the consolidated model

- Series changes

Click the **Refresh** button on the ribbon bar to view the linked series changes in the present consolidated model.

- Scenario changes

When you simulate on a shared scenario from a sub-model, you can view the changes in the main model by clicking the *Refresh linked scenarios* icon next to the scenario.

 <div class="center">
  <Zoom>
    <img alt="Linked scenarios changes reflected" src={useBaseUrl("/doc-images/storage/features/scenario-mapping-refreshed.png")} />
  </Zoom>
  <p id="caption-left">Linked scenarios changes reflected <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>

Note the change in each model and the resulted value in the main model.

### Limitations

You can only link a leaf node and not the parent node.

 <div class="center">
  <Zoom>
    <img alt="Only a leaf node can be linked with another model" src={useBaseUrl("/doc-images/storage/features/link-only-leaf-node.png")} />
  </Zoom>
  <p id="caption-left">Link only a leaf node <i id="credit">Credits to our partner, BlueShift Brazil</i></p>
 </div>
